<!-- Deep Analysis Tab -->
<div
  id="tab-content-analysis"
  class="hidden h-full w-full tab-content-item px-4 pt-4 pb-4 lg:px-8 lg:pb-8 overflow-hidden z-10 flex flex-col"
>
  <div
    id="analysis-tab-content-empty"
    class="flex-1 bg-white/20 dark:bg-slate-900/20 rounded-3xl border border-slate-400 dark:border-white/20 backdrop-blur-sm flex flex-col items-center justify-center p-8 text-center border-dashed min-h-full"
  >
    <div
      class="w-20 h-20 bg-gradient-to-br from-cyan-500/20 to-teal-500/20 dark:from-cyan-500/10 dark:to-teal-500/10 rounded-3xl flex items-center justify-center mb-6 text-cyan-500"
    >
      <i data-lucide="microscope" class="w-10 h-10"></i>
    </div>
    <h4 class="text-lg font-bold text-slate-700 dark:text-slate-300 mb-3">Ph√¢n t√≠ch chuy√™n s√¢u</h4>
    <p class="text-sm text-slate-500 dark:text-slate-400 max-w-xs leading-relaxed">
      B√°o c√°o ph√¢n t√≠ch ƒëa chi·ªÅu v·ªÅ doanh nghi·ªáp, bao g·ªìm ƒë·ªãnh gi√°, d·ª± b√°o xu h∆∞·ªõng v√† ƒë√°nh gi√° r·ªßi ro do AI t·ªïng h·ª£p.
    </p>
    <div class="mt-6 px-4 py-2 bg-cyan-50 dark:bg-cyan-900/20 rounded-xl">
      <p class="text-xs text-cyan-600 dark:text-cyan-400 font-medium">üî¨ Ch·ªçn m√£ c·ªï phi·∫øu ƒë·ªÉ xem ph√¢n t√≠ch chi ti·∫øt</p>
    </div>
  </div>
  <!-- Timeframe Selector Cards (inside tab) -->
  <div id="analysis-content-timeframe" template="analysis-content-timeframe-template" class="hidden w-full z-30">
    <div class="w-full animate-fade-in-up">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 p-1">
        <!-- Short Term Summary -->
        <div
          id="tech-card-short"
          class="cursor-pointer transition-all duration-300 p-4 rounded-3xl border-2 border-indigo-400/60 bg-gradient-to-br from-indigo-100 via-indigo-50 to-purple-100 dark:from-indigo-600/30 dark:via-indigo-500/20 dark:to-purple-600/20 backdrop-blur-xl shadow-[0_8px_32px_rgba(99,102,241,0.3)] scale-[1.03]"
        >
          <div class="w-full flex items-center justify-between mb-3 gap-2">
            <div class="flex-1 flex items-center gap-2 min-w-0">
              <div
                class="w-8 h-8 rounded-full bg-white dark:bg-indigo-500/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shadow-sm border border-slate-200 dark:border-transparent shrink-0"
              >
                <i data-lucide="zap" class="w-4 h-4"></i>
              </div>
              <span class="text-base font-bold text-slate-700 dark:text-indigo-200">Xu h∆∞·ªõng ng·∫Øn h·∫°n trong 1 nƒÉm</span>
            </div>
            <div class="flex items-center gap-2">
              <span
                id="tech-short-trend-badge"
                class="h-6 w-16 bg-slate-200/50 dark:bg-slate-800/50 rounded-full skeleton-shimmer text-transparent border border-transparent text-center"
              ></span>
              <button
                onclick="toggleSummaryCard()"
                class="tech-card-toggle p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors"
              >
                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-500 dark:text-slate-400"></i>
              </button>
            </div>
          </div>
          <div class="tech-card-content flex flex-wrap gap-x-8 gap-y-3 animate-fade-in">
            <div class="min-w-0">
              <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold mb-0.5">
                Xu h∆∞·ªõng
              </p>
              <p
                id="tech-short-trend"
                class="text-base font-bold text-slate-700 dark:text-indigo-100 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-[4rem] h-6 whitespace-nowrap"
              ></p>
            </div>
            <div class="min-w-0">
              <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold mb-0.5">
                T√≠n hi·ªáu
              </p>
              <p
                id="tech-short-signal"
                class="text-base font-bold text-slate-700 dark:text-indigo-100 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-[4rem] h-6 whitespace-nowrap"
              ></p>
            </div>
            <div class="col-span-2">
              <div class="flex justify-between items-center gap-2 mb-1.5">
                <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold">ƒê·ªô tin c·∫≠y</p>
                <span
                  id="tech-short-confidence"
                  class="text-xs font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-4"
                ></span>
              </div>
              <div id="tech-short-confidence-container" class="relative h-3 w-full rounded-full overflow-visible">
                <!-- Skeleton overlay -->
                <div
                  id="tech-short-confidence-skeleton"
                  class="absolute inset-0 bg-slate-300/90 dark:bg-slate-600/90 rounded-full skeleton-shimmer z-20"
                ></div>
                <!-- Gradient bar -->
                <div
                  class="absolute inset-0 rounded-full"
                  style="background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #22c55e 100%)"
                ></div>
                <div
                  id="tech-short-confidence-bar"
                  class="absolute top-1/2 -translate-y-1/2 w-4 h-4 rounded-full shadow-lg z-10 transition-all duration-1000 opacity-0"
                  style="
                    left: 0%;
                    background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
                    border: 3px solid #ef4444;
                    box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
                  "
                ></div>
              </div>
            </div>
          </div>
        </div>
        <!-- Long Term Summary -->
        <div
          id="tech-card-long"
          class="cursor-pointer transition-all duration-300 p-4 rounded-3xl border border-slate-200 dark:border-white/10 bg-gradient-to-br from-slate-100 via-white to-slate-50 dark:from-slate-800/60 dark:via-slate-900/40 dark:to-slate-800/40 backdrop-blur-md shadow-sm opacity-60 hover:opacity-100 hover:scale-[1.01]"
        >
          <div class="w-full flex items-center justify-between mb-3 gap-2">
            <div class="flex-1 flex items-center gap-2 min-w-0">
              <div
                class="w-8 h-8 rounded-full bg-white dark:bg-emerald-500/20 flex items-center justify-center text-emerald-600 dark:text-emerald-400 shadow-sm border border-slate-200 dark:border-transparent shrink-0"
              >
                <i data-lucide="anchor" class="w-4 h-4"></i>
              </div>
              <span class="text-base font-bold text-slate-700 dark:text-emerald-200">Xu h∆∞·ªõng d√†i h·∫°n trong 5 nƒÉm</span>
            </div>
            <div class="flex items-center gap-2">
              <span
                id="tech-long-trend-badge"
                class="h-6 w-16 bg-slate-200/50 dark:bg-slate-800/50 rounded-full skeleton-shimmer text-transparent border border-transparent text-center"
              ></span>
              <button
                onclick="toggleSummaryCard()"
                class="tech-card-toggle p-1 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors"
              >
                <i data-lucide="chevron-up" class="w-4 h-4 text-slate-500 dark:text-slate-400"></i>
              </button>
            </div>
          </div>
          <div class="tech-card-content flex flex-wrap gap-x-8 gap-y-3">
            <div class="min-w-0">
              <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold mb-0.5">
                Xu h∆∞·ªõng
              </p>
              <p
                id="tech-long-trend"
                class="text-base font-bold text-slate-700 dark:text-emerald-100 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-[4rem] h-6 whitespace-nowrap"
              ></p>
            </div>
            <div class="min-w-0">
              <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold mb-0.5">
                T√≠n hi·ªáu
              </p>
              <p
                id="tech-long-signal"
                class="text-base font-bold text-slate-700 dark:text-emerald-100 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-[4rem] h-6 whitespace-nowrap"
              ></p>
            </div>
            <div class="col-span-2">
              <div class="flex justify-between items-center gap-2 mb-1.5">
                <p class="text-xs uppercase tracking-wider text-slate-500 dark:text-slate-400 font-bold">ƒê·ªô tin c·∫≠y</p>
                <span
                  id="tech-long-confidence"
                  class="text-xs font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-4"
                ></span>
              </div>
              <div id="tech-long-confidence-container" class="relative h-3 w-full rounded-full overflow-visible">
                <!-- Skeleton overlay -->
                <div
                  id="tech-long-confidence-skeleton"
                  class="absolute inset-0 bg-slate-300/90 dark:bg-slate-600/90 rounded-full skeleton-shimmer z-20"
                ></div>
                <!-- Gradient bar -->
                <div
                  class="absolute inset-0 rounded-full"
                  style="background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #22c55e 100%)"
                ></div>
                <div
                  id="tech-long-confidence-bar"
                  class="absolute top-1/2 -translate-y-1/2 w-4 h-4 rounded-full shadow-lg z-10 transition-all duration-1000 opacity-0"
                  style="
                    left: 0%;
                    background: linear-gradient(135deg, #ffffff 0%, #e2e8f0 100%);
                    border: 3px solid #ef4444;
                    box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
                  "
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Collapsible Analysis Chart Area -->
  <div id="analysis-chart-collapsible" template="analysis-chart-collapsible-template" class="hidden w-full mb-4 p-1">
    <div class="flex items-center justify-between mb-2">
      <h5
        class="text-[11px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em] flex items-center gap-2"
      >
        <i data-lucide="line-chart" class="w-4 h-4 text-primary-500"></i> Di·ªÖn bi·∫øn gi√°
      </h5>
      <div class="flex items-center gap-2">
        <!-- Indicator Dropdown for Analysis Chart -->
        <div class="relative" id="analysis-indicator-dropdown-container">
          <button
            id="analysis-indicator-dropdown-trigger"
            class="flex items-center gap-1.5 text-xs font-bold px-2.5 py-1 bg-white/60 dark:bg-slate-800/60 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-white/80 dark:hover:bg-slate-800/80 transition-colors"
          >
            <i data-lucide="line-chart" class="w-3 h-3"></i>
            <span>Ch·ªâ b√°o</span>
            <span
              id="analysis-indicator-count-badge"
              class="hidden min-w-[16px] h-[16px] px-1 bg-primary-500 text-white text-[9px] font-bold rounded-full flex items-center justify-center"
              >0</span
            >
            <i
              data-lucide="chevron-down"
              class="w-3 h-3 ml-0.5 transition-transform"
              id="analysis-indicator-chevron"
            ></i>
          </button>

          <!-- Dropdown Panel -->
          <div
            id="analysis-indicator-dropdown-panel"
            class="hidden absolute top-full right-0 mt-2 w-72 max-h-[400px] overflow-y-auto p-3 bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-slate-200 dark:border-white/10 rounded-xl shadow-xl z-50"
          >
            <!-- Moving Averages Group -->
            <div class="mb-3">
              <div class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-1">
                ƒê∆∞·ªùng trung b√¨nh
              </div>
              <div class="space-y-1">
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-ma"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-blue-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">SMA (20)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Simple MA</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-ema"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-orange-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-orange-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">EMA (9)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Exponential MA</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-wma"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-cyan-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-cyan-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">WMA (20)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Weighted MA</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-vwap"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-violet-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-violet-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">VWAP</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Vol Weighted Price</span>
                </label>
              </div>
            </div>

            <!-- Bands Group -->
            <div class="mb-3">
              <div class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-1">
                D·∫£i gi√°
              </div>
              <div class="space-y-1">
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-bb"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-purple-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-purple-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">Bollinger Bands</span>
                  <span class="text-[10px] text-slate-400 ml-auto">BB (20,2)</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-atr"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-pink-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-pink-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">ATR (14)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Avg True Range</span>
                </label>
              </div>
            </div>

            <!-- Oscillators Group -->
            <div class="mb-3">
              <div class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-1">
                Dao ƒë·ªông
              </div>
              <div class="space-y-1">
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-rsi"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-amber-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-amber-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">RSI (14)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Relative Strength</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-macd"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-blue-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-blue-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">MACD</span>
                  <span class="text-[10px] text-slate-400 ml-auto">12, 26, 9</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-stoch"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-emerald-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-emerald-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">Stochastic</span>
                  <span class="text-[10px] text-slate-400 ml-auto">%K, %D</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-williams"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-cyan-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-cyan-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">Williams %R</span>
                  <span class="text-[10px] text-slate-400 ml-auto">14 periods</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-cci"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-violet-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-violet-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">CCI (20)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Commodity Channel</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-roc"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-orange-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-orange-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">ROC (10)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Rate of Change</span>
                </label>
              </div>
            </div>

            <!-- Trend Group -->
            <div class="mb-3">
              <div class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-1">
                Xu h∆∞·ªõng
              </div>
              <div class="space-y-1">
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-adx"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-green-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-green-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">ADX (14)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">+DI / -DI</span>
                </label>
              </div>
            </div>

            <!-- Volume Group -->
            <div>
              <div class="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 px-1">
                Kh·ªëi l∆∞·ª£ng
              </div>
              <div class="space-y-1">
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-vol-sma"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-violet-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-violet-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">Vol SMA (20)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Volume Average</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-obv"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-cyan-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-cyan-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">OBV</span>
                  <span class="text-[10px] text-slate-400 ml-auto">On Balance Vol</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-mfi"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-amber-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-amber-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">MFI (14)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Money Flow Index</span>
                </label>
                <label
                  class="flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer group"
                >
                  <input
                    type="checkbox"
                    id="analysis-indicator-cmf"
                    class="w-3.5 h-3.5 rounded border-slate-300 accent-pink-500"
                  />
                  <span class="w-2 h-2 rounded-full bg-pink-500"></span>
                  <span class="text-xs font-medium text-slate-700 dark:text-slate-300">CMF (20)</span>
                  <span class="text-[10px] text-slate-400 ml-auto">Chaikin Money Flow</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <button
          id="analysis-chart-expand-btn"
          class="p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-all text-slate-400 hover:text-primary-500 mr-1"
          title="M·ªü r·ªông bi·ªÉu ƒë·ªì"
        >
          <i data-lucide="maximize-2" class="w-4 h-4" id="analysis-chart-expand-icon"></i>
        </button>

        <button
          onclick="toggleAnalysisChart()"
          class="p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-800 transition-all text-slate-400 hover:text-primary-500"
          title="Thu g·ªçn/M·ªü r·ªông bi·ªÉu ƒë·ªì"
        >
          <i
            data-lucide="chevron-up"
            class="w-4 h-4 transition-transform duration-300"
            id="analysis-chart-toggle-icon"
            style="transform: rotate(180deg)"
          ></i>
        </button>
      </div>
    </div>
    <div id="analysis-chart-wrapper" class="w-full h-full flex flex-col gap-3 overflow-hidden collapsed">
      <!-- Analysis Price Chart Only -->
      <div
        id="analysis-price-chart-container"
        class="bg-white/40 dark:bg-slate-900/40 rounded-2xl border border-slate-200 dark:border-white/10 backdrop-blur-sm p-3 h-[400px] relative transition-none"
      >
        <div id="analysis-candlestick-chart" style="width: 100%; height: 100%"></div>
        <!-- Vertical Resizer Handle -->
        <div
          id="analysis-chart-resizer"
          class="absolute bottom-0 left-0 right-0 h-2 cursor-ns-resize flex items-center justify-center hover:bg-primary-500/20 group transition-colors rounded-b-2xl z-20"
        >
          <div
            class="w-12 h-1 bg-slate-300 dark:bg-slate-700 rounded-full group-hover:bg-primary-500/50 transition-colors"
          ></div>
        </div>
      </div>
    </div>
  </div>
  <div
    id="analysis-tab-content-container"
    template="analysis-tab-content-container-template"
    class="hidden space-y-5 animate-fade-in-up p-1 flex-1 min-h-0 overflow-y-auto custom-scrollbar"
  >
    <!-- Main Indicators Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-5">
      <!-- Left Column: Primary Indicators -->
      <div class="space-y-4">
        <!-- Momentum Box -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="gauge" class="w-4 h-4"></i> ƒê·ªông l∆∞·ª£ng
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >Nh√≥m ch·ªâ b√°o ƒëo l∆∞·ªùng t·ªëc ƒë·ªô v√† s·ª©c m·∫°nh bi·∫øn ƒë·ªông gi√°, gi√∫p x√°c ƒë·ªãnh ƒëi·ªÉm qu√° mua/qu√° b√°n v√† ƒë·∫£o chi·ªÅu
                xu h∆∞·ªõng</span
              ></span
            >
          </h5>
          <div class="space-y-4">
            <!-- RSI -->
            <div class="space-y-1.5">
              <div class="flex justify-between text-sm font-medium">
                <span class="text-slate-500 indicator-tooltip"
                  >RSI (14)<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Relative Strength Index - Ch·ªâ s·ªë S·ª©c m·∫°nh T∆∞∆°ng ƒë·ªëi. ƒêo l∆∞·ªùng t·ªëc ƒë·ªô thay ƒë·ªïi gi√°. RSI &lt; 30 =
                    Qu√° b√°n (c√≥ th·ªÉ tƒÉng), RSI &gt; 70 = Qu√° mua (c√≥ th·ªÉ gi·∫£m)</span
                  ></span
                >
                <span
                  id="tech-rsi-value"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-5 indicator-tooltip"
                  ><span class="tooltip-content">Ch·ªâ s·ªë RSI hi·ªán t·∫°i. > 70: Qu√° mua, < 30: Qu√° b√°n</span></span
                >
              </div>
              <!-- RSI Bar with clear zones -->
              <div id="tech-rsi-bar-container" class="relative mt-2 mb-4">
                <!-- Skeleton overlay -->
                <div
                  id="tech-rsi-bar-skeleton"
                  class="absolute inset-0 bg-slate-100 dark:bg-slate-900 rounded-lg skeleton-shimmer z-20"
                ></div>
                <!-- Labels -->
                <div class="flex justify-between text-[10px] font-medium text-slate-400 dark:text-slate-500 mb-1">
                  <span>0</span>
                  <span class="ml-[25%]">30</span>
                  <span class="ml-auto mr-[25%]">70</span>
                  <span>100</span>
                </div>
                <!-- Bar -->
                <div class="relative h-3 w-full mt-2">
                  <!-- Background Bar with Overflow Hidden for Corners -->
                  <div class="absolute inset-0 rounded-full overflow-hidden shadow-inner">
                    <!-- Oversold zone (0-30) - Green -->
                    <div
                      class="absolute inset-y-0 left-0 w-[30%] bg-gradient-to-r from-green-400 to-green-300 dark:from-green-600 dark:to-green-500"
                    ></div>
                    <!-- Neutral zone (30-70) - Amber/Yellow -->
                    <div
                      class="absolute inset-y-0 left-[30%] w-[40%] bg-gradient-to-r from-amber-300 via-yellow-200 to-amber-300 dark:from-amber-600/60 dark:via-yellow-500/50 dark:to-amber-600/60"
                    ></div>
                    <!-- Overbought zone (70-100) - Red -->
                    <div
                      class="absolute inset-y-0 right-0 w-[30%] bg-gradient-to-r from-red-300 to-red-400 dark:from-red-500 dark:to-red-600"
                    ></div>
                    <!-- Zone separators -->
                    <div class="absolute inset-y-0 left-[30%] w-0.5 bg-white/60 dark:bg-white/20"></div>
                    <div class="absolute inset-y-0 left-[70%] w-0.5 bg-white/60 dark:bg-white/20"></div>
                  </div>
                  <!-- Marker (Outside the bar's overflow-hidden container) -->
                  <div
                    id="tech-rsi-marker"
                    class="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white dark:bg-slate-200 rounded-full border-2 border-slate-700 dark:border-slate-900 shadow-lg z-10 transition-all duration-500"
                    style="left: calc(50% - 8px)"
                  ></div>
                </div>
                <!-- Zone labels -->
                <div class="flex justify-between text-[9px] font-semibold mt-1">
                  <span class="text-green-600 dark:text-green-400 w-[30%] text-center">Qu√° b√°n</span>
                  <span class="text-yellow-600 dark:text-yellow-400 w-[40%] text-center">Trung t√≠nh</span>
                  <span class="text-red-600 dark:text-red-400 w-[30%] text-center">Qu√° mua</span>
                </div>
              </div>
              <div
                id="tech-rsi-sparkline"
                class="mini-sparkline h-[60px] skeleton-shimmer bg-slate-200/50 dark:bg-slate-800/40 rounded-xl"
              ></div>
              <div
                id="tech-rsi-signal"
                class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-24 h-6 ml-auto"
              ></div>
            </div>
            <!-- Stochastic -->
            <div class="space-y-1.5">
              <div class="flex justify-between text-sm font-medium flex-wrap gap-1">
                <span class="text-slate-500 indicator-tooltip"
                  >Stochastic<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Stochastic Oscillator - So s√°nh gi√° ƒë√≥ng c·ª≠a v·ªõi ph·∫°m vi gi√° trong 14 phi√™n. K &lt; 20 = Qu√° b√°n, K
                    &gt; 80 = Qu√° mua. Giao c·∫Øt K/D b√°o hi·ªáu ƒë·∫£o chi·ªÅu</span
                  ></span
                >
                <div class="flex gap-2">
                  <span
                    id="tech-stoch-k"
                    class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-10 h-5 indicator-tooltip"
                    ><span class="tooltip-content"
                      >ƒê∆∞·ªùng %K (nhanh) c·ªßa Stochastic. > 80: Qu√° mua, < 20: Qu√° b√°n</span
                    ></span
                  >
                  <span
                    id="tech-stoch-d"
                    class="text-slate-400 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-10 h-5 ml-1 indicator-tooltip"
                    ><span class="tooltip-content"
                      >ƒê∆∞·ªùng %D (ch·∫≠m) c·ªßa Stochastic. Th∆∞·ªùng d√πng l√†m ƒë∆∞·ªùng t√≠n hi·ªáu</span
                    ></span
                  >
                </div>
              </div>
              <div
                id="tech-stoch-signal"
                class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-24 h-6"
              ></div>
              <div
                id="tech-stoch-sparkline"
                class="mini-sparkline h-[60px] skeleton-shimmer bg-slate-200/50 dark:bg-slate-800/40 rounded-xl"
              ></div>
            </div>
            <!-- MACD -->
            <div class="space-y-1.5">
              <div class="flex justify-between text-sm font-medium flex-wrap gap-1">
                <span class="text-slate-500 indicator-tooltip"
                  >MACD (12, 26, 9)<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Moving Average Convergence Divergence - ƒêo ƒë·ªông l∆∞·ª£ng xu h∆∞·ªõng. Histogram d∆∞∆°ng = xu h∆∞·ªõng tƒÉng
                    m·∫°nh, √¢m = xu h∆∞·ªõng gi·∫£m. Giao c·∫Øt MACD/Signal b√°o hi·ªáu mua/b√°n</span
                  ></span
                >
                <div class="flex gap-2">
                  <span
                    id="tech-macd-line"
                    class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-10 h-5 indicator-tooltip"
                    ><span class="tooltip-content">Gi√° tr·ªã ƒë∆∞·ªùng MACD (12-26). MACD > 0: Xu h∆∞·ªõng tƒÉng</span></span
                  >
                  <span
                    id="tech-macd-signal-val"
                    class="text-slate-400 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md min-w-10 h-5 ml-1 indicator-tooltip"
                    ><span class="tooltip-content"
                      >Gi√° tr·ªã ƒë∆∞·ªùng T√≠n hi·ªáu (Signal 9). Giao c·∫Øt v·ªõi MACD b√°o hi·ªáu mua/b√°n</span
                    ></span
                  >
                </div>
              </div>
              <div class="flex justify-between text-sm font-bold">
                <span
                  id="tech-macd-hist"
                  class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-14 h-4 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê·ªô ch√™nh l·ªách gi·ªØa MACD v√† Signal. Histogram cao = ƒë·ªông l∆∞·ª£ng m·∫°nh</span
                  ></span
                >
                <span
                  id="tech-macd-signal"
                  class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-24 h-6"
                ></span>
              </div>
              <div
                id="tech-macd-sparkline"
                class="mini-sparkline h-[60px] skeleton-shimmer bg-slate-200/50 dark:bg-slate-800/40 rounded-xl"
              ></div>
            </div>
            <!-- Williams %R -->
            <div class="flex justify-between text-sm font-medium">
              <span class="text-slate-500 indicator-tooltip"
                >Williams %R<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Williams Percent Range - ƒêo v·ªã tr√≠ gi√° trong ph·∫°m vi cao/th·∫•p. Gi√° tr·ªã t·ª´ -100 ƒë·∫øn 0. &lt; -80 = Qu√°
                  b√°n, &gt; -20 = Qu√° mua</span
                ></span
              >
              <span
                id="tech-willr"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >V·ªã tr√≠ gi√° hi·ªán t·∫°i trong ph·∫°m vi cao/th·∫•p. < -80: Qu√° b√°n, > -20: Qu√° mua</span
                ></span
              >
            </div>
          </div>
        </div>

        <!-- Trend Indicators -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="move-up-right" class="w-4 h-4"></i> Xu h∆∞·ªõng
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >Nh√≥m ch·ªâ b√°o x√°c ƒë·ªãnh chi·ªÅu h∆∞·ªõng v√† s·ª©c m·∫°nh xu h∆∞·ªõng gi√°, bao g·ªìm ƒë∆∞·ªùng trung b√¨nh ƒë·ªông (MA) v√†
                ADX</span
              ></span
            >
          </h5>
          <div class="space-y-4">
            <div id="tech-ma-list" class="space-y-2 text-sm">
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >SMA20:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Simple Moving Average 20 - Trung b√¨nh gi√° ƒë√≥ng c·ª≠a 20 phi√™n g·∫ßn nh·∫•t. D√πng ƒë·ªÉ x√°c ƒë·ªãnh xu h∆∞·ªõng
                    ng·∫Øn h·∫°n</span
                  ></span
                ><span
                  id="tech-sma20"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n 20 phi√™n. D√πng cho xu h∆∞·ªõng ng·∫Øn h·∫°n</span
                  ></span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >SMA50:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Simple Moving Average 50 - Trung b√¨nh gi√° ƒë√≥ng c·ª≠a 50 phi√™n. D√πng ƒë·ªÉ x√°c ƒë·ªãnh xu h∆∞·ªõng trung
                    h·∫°n</span
                  ></span
                ><span
                  id="tech-sma50"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n 50 phi√™n. D√πng cho xu h∆∞·ªõng trung h·∫°n</span
                  ></span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >SMA100:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Simple Moving Average 100 - Trung b√¨nh gi√° 100 phi√™n. H·ªó tr·ª£/kh√°ng c·ª± quan tr·ªçng cho xu h∆∞·ªõng
                    trung-d√†i h·∫°n</span
                  ></span
                ><span
                  id="tech-sma100"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n 100 phi√™n. H·ªó tr·ª£/kh√°ng c·ª± trung h·∫°n</span
                  ></span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >SMA200:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Simple Moving Average 200 - Trung b√¨nh gi√° 200 phi√™n. Ch·ªâ b√°o quan tr·ªçng nh·∫•t cho xu h∆∞·ªõng d√†i
                    h·∫°n</span
                  ></span
                ><span
                  id="tech-sma200"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông ƒë∆°n gi·∫£n 200 phi√™n. Ch·ªâ b√°o xu th·∫ø d√†i h·∫°n c·ª±c k·ª≥ quan tr·ªçng</span
                  ></span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >EMA20:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Exponential Moving Average 20 - Trung b√¨nh l≈©y th·ª´a 20 phi√™n. Nh·∫°y h∆°n SMA, ph·∫£n √°nh nhanh bi·∫øn
                    ƒë·ªông gi√°</span
                  ></span
                ><span
                  id="tech-ema20"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông l≈©y th·ª´a 20 phi√™n. Nh·∫°y b√©n h∆°n SMA v·ªõi c√°c bi·∫øn ƒë·ªông gi√° g·∫ßn ƒë√¢y</span
                  ></span
                >
              </div>
              <div class="flex justify-between">
                <span class="text-slate-500 indicator-tooltip"
                  >EMA50:<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Exponential Moving Average 50 - Trung b√¨nh l≈©y th·ª´a 50 phi√™n. K·∫øt h·ª£p ƒë·ªô nh·∫°y v√† xu h∆∞·ªõng trung
                    h·∫°n</span
                  ></span
                ><span
                  id="tech-ema50"
                  class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >ƒê∆∞·ªùng trung b√¨nh ƒë·ªông l≈©y th·ª´a 50 phi√™n. C√¢n b·∫±ng gi·ªØa ƒë·ªô nh·∫°y v√† xu h∆∞·ªõng trung h·∫°n</span
                  ></span
                >
              </div>
            </div>
            <div class="pt-3 border-t border-slate-200 dark:border-white/5">
              <div class="flex justify-between text-sm font-medium mb-1">
                <span class="text-slate-500 indicator-tooltip"
                  >ADX<span class="tooltip-icon"><i data-lucide="info"></i></span
                  ><span class="tooltip-content"
                    >Average Directional Index - Ch·ªâ s·ªë ƒê·ªãnh h∆∞·ªõng Trung b√¨nh. ƒêo s·ª©c m·∫°nh xu h∆∞·ªõng. ADX &gt; 25 = xu
                    h∆∞·ªõng m·∫°nh, &lt; 20 = ƒëi ngang. +DI/-DI x√°c ƒë·ªãnh chi·ªÅu tƒÉng/gi·∫£m</span
                  ></span
                >
                <span
                  id="tech-adx-val"
                  class="font-bold text-indigo-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-5 indicator-tooltip"
                  ><span class="tooltip-content"
                    >Ch·ªâ s·ªë ADX ƒëo s·ª©c m·∫°nh c·ªßa xu h∆∞·ªõng. > 25: Xu h∆∞·ªõng m·∫°nh, < 20: Kh√¥ng r√µ xu h∆∞·ªõng</span
                  ></span
                >
              </div>
              <div class="flex items-center gap-2 mb-2">
                <span
                  id="tech-adx-dmp"
                  class="text-sm font-bold text-emerald-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-4 indicator-tooltip"
                  ><span class="tooltip-content"
                    >Directional Movement Positive (+DI). Khi n·∫±m tr√™n -DI b√°o hi·ªáu √°p l·ª±c tƒÉng gi√°</span
                  ></span
                >
                <span class="text-slate-300">/</span>
                <span
                  id="tech-adx-dmn"
                  class="text-sm font-bold text-rose-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-10 h-4 indicator-tooltip"
                  ><span class="tooltip-content"
                    >Directional Movement Negative (-DI). Khi n·∫±m tr√™n +DI b√°o hi·ªáu √°p l·ª±c gi·∫£m gi√°</span
                  ></span
                >
              </div>
              <div
                id="tech-adx-signal"
                class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-32 h-6"
              ></div>
            </div>
          </div>
        </div>

        <!-- Volatility -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="waves" class="w-4 h-4"></i> Bi·∫øn ƒë·ªông
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >Nh√≥m ch·ªâ b√°o ƒëo l∆∞·ªùng m·ª©c ƒë·ªô dao ƒë·ªông gi√°, gi√∫p x√°c ƒë·ªãnh ng∆∞·ª°ng h·ªó tr·ª£/kh√°ng c·ª± v√† ƒë√°nh gi√° r·ªßi
                ro</span
              ></span
            >
          </h5>
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >BB Tr√™n:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Bollinger Band Upper - D·∫£i Bollinger tr√™n. Gi√° ch·∫°m BB tr√™n th∆∞·ªùng cho th·∫•y qu√° mua, c√≥ th·ªÉ ƒëi·ªÅu
                  ch·ªânh</span
                ></span
              ><span
                id="tech-bb-upper"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >D·∫£i Bollinger tr√™n. Gi√° v∆∞·ª£t qua d·∫£i n√†y th∆∞·ªùng b√°o hi·ªáu tr·∫°ng th√°i qu√° mua</span
                ></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >BB Gi·ªØa:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Bollinger Band Middle - ƒê∆∞·ªùng trung b√¨nh 20 phi√™n, l√† m·ª©c h·ªó tr·ª£/kh√°ng c·ª± ƒë·ªông c·ªßa d·∫£i
                  Bollinger</span
                ></span
              ><span
                id="tech-bb-middle"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >ƒê∆∞·ªùng trung t√¢m d·∫£i Bollinger (SMA 20). ƒê√≥ng vai tr√≤ l√† m·ª©c c√¢n b·∫±ng ƒë·ªông</span
                ></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >BB D∆∞·ªõi:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Bollinger Band Lower - D·∫£i Bollinger d∆∞·ªõi. Gi√° ch·∫°m BB d∆∞·ªõi th∆∞·ªùng cho th·∫•y qu√° b√°n, c√≥ th·ªÉ h·ªìi
                  ph·ª•c</span
                ></span
              ><span
                id="tech-bb-lower"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >D·∫£i Bollinger d∆∞·ªõi. Gi√° r∆°i d∆∞·ªõi d·∫£i n√†y th∆∞·ªùng b√°o hi·ªáu tr·∫°ng th√°i qu√° b√°n</span
                ></span
              >
            </div>
            <div
              id="tech-bb-signal"
              class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-24 h-6"
            ></div>
            <div class="pt-2 border-t border-slate-200 dark:border-white/5 flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >ATR:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Average True Range - Ph·∫°m vi Th·ª±c Trung b√¨nh. ƒêo bi√™n ƒë·ªô dao ƒë·ªông gi√° trung b√¨nh. ATR cao = bi·∫øn ƒë·ªông
                  m·∫°nh</span
                ></span
              >
              <span
                id="tech-atr"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >Average True Range ƒëo l∆∞·ªùng m·ª©c ƒë·ªô bi·∫øn ƒë·ªông tuy·ªát ƒë·ªëi c·ªßa gi√°. ATR cao = r·ªßi ro cao</span
                ></span
              >
            </div>
          </div>
        </div>

        <!-- Kh·ªëi l∆∞·ª£ng & D√≤ng ti·ªÅn -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="bar-chart-3" class="w-4 h-4"></i> Kh·ªëi l∆∞·ª£ng & D√≤ng ti·ªÅn
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >Nh√≥m ch·ªâ b√°o ph√¢n t√≠ch kh·ªëi l∆∞·ª£ng giao d·ªãch v√† d√≤ng ti·ªÅn, gi√∫p x√°c nh·∫≠n xu h∆∞·ªõng</span
              ></span
            >
          </h5>
          <div class="space-y-3 text-sm">
            <div class="flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >OBV:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >On-Balance Volume - Kh·ªëi l∆∞·ª£ng C√¢n b·∫±ng. TƒÉng = d√≤ng ti·ªÅn v√†o, Gi·∫£m = d√≤ng ti·ªÅn ra. X√°c nh·∫≠n s·ª©c m·∫°nh
                  xu h∆∞·ªõng</span
                ></span
              >
              <span
                id="tech-obv-trend"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-14 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >Xu h∆∞·ªõng c·ªßa On-Balance Volume. OBV tƒÉng x√°c nh·∫≠n s·ª± t√≠ch l≈©y c·ªßa d√≤ng ti·ªÅn</span
                ></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500 indicator-tooltip"
                >CMF:<span class="tooltip-icon"><i data-lucide="info"></i></span
                ><span class="tooltip-content"
                  >Chaikin Money Flow - D√≤ng ti·ªÅn Chaikin. CMF > 0 = √°p l·ª±c mua, CMF < 0 = √°p l·ª±c b√°n</span
                ></span
              >
              <span
                id="tech-cmf"
                class="font-bold text-slate-700 dark:text-slate-200 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-14 h-5 text-right indicator-tooltip"
                ><span class="tooltip-content"
                  >Chaikin Money Flow ƒëo l∆∞·ªùng l·ª±c mua/b√°n t√≠ch l≈©y. CMF > 0: D√≤ng ti·ªÅn ƒëang v√†o</span
                ></span
              >
            </div>
            <div
              id="tech-vol-signal"
              class="text-sm font-bold flex items-center justify-center skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-full w-32 h-6"
            ></div>
          </div>
        </div>

        <!-- Pivot Points -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="target" class="w-4 h-4"></i> ƒêi·ªÉm Pivot
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >C√°c m·ª©c gi√° quan tr·∫≠ng t√≠nh t·ª´ gi√° Cao/Th·∫•p/ƒê√≥ng c·ª≠a phi√™n tr∆∞·ªõc. H·ªó tr·ª£ (S) v√† Kh√°ng c·ª± (R) l√† c√°c m·ª©c
                gi√° ti·ªÅm nƒÉng ƒë·∫£o chi·ªÅu</span
              ></span
            >
          </h5>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between font-bold text-indigo-500 mb-1">
              <span class="text-slate-500 font-medium">Pivot</span
              ><span
                id="tech-pivot"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >ƒêi·ªÉm xoay trung t√¢m. L√† gi√° tr·ªã trung b√¨nh c·ªßa Cao, Th·∫•p v√† ƒê√≥ng c·ª≠a phi√™n tr∆∞·ªõc</span
                ></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">Kh√°ng c·ª± 1</span
              ><span
                id="tech-pivot-r1"
                class="text-rose-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c kh√°ng c·ª± 1. V√πng gi√° phe b√°n th∆∞·ªùng tr·ª±c ch·ªù</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">Kh√°ng c·ª± 2</span
              ><span
                id="tech-pivot-r2"
                class="text-rose-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c kh√°ng c·ª± 2. V√πng gi√° m·ª•c ti√™u n·∫øu v∆∞·ª£t qua R1</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">Kh√°ng c·ª± 3</span
              ><span
                id="tech-pivot-r3"
                class="text-rose-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c kh√°ng c·ª± 3. Ng∆∞·ª°ng kh√°ng c·ª± m·∫°nh nh·∫•t trong ng√†y</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">H·ªó tr·ª£ 1</span
              ><span
                id="tech-pivot-s1"
                class="text-emerald-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c h·ªó tr·ª£ 1. V√πng gi√° phe mua th∆∞·ªùng tr·ª±c ch·ªù</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">H·ªó tr·ª£ 2</span
              ><span
                id="tech-pivot-s2"
                class="text-emerald-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c h·ªó tr·ª£ 2. V√πng gi√° m·ª•c ti√™u n·∫øu xuy√™n th·ªßng S1</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">H·ªó tr·ª£ 3</span
              ><span
                id="tech-pivot-s3"
                class="text-emerald-500 skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c h·ªó tr·ª£ 3. Ng∆∞·ª°ng h·ªó tr·ª£ m·∫°nh nh·∫•t trong ng√†y</span></span
              >
            </div>
          </div>
        </div>
        <!-- Fibonacci -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-[11px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-4"
          >
            <i data-lucide="layers" class="w-4 h-4"></i> Fibonacci
            <span class="indicator-tooltip"
              ><span class="tooltip-icon"><i data-lucide="info"></i></span
              ><span class="tooltip-content"
                >C√°c m·ª©c t·ªâ l·ªá Fibonacci (0%, 23.6%, 38.2%, 50%, 61.8%, 78.6%, 100%) d·ª±a tr√™n bi√™n ƒë·ªô gi√°. Th∆∞·ªùng d√πng
                ƒë·ªÉ x√°c ƒë·ªãnh m·ª©c h·ªìi/ƒëi·ªÅu ch·ªânh</span
              ></span
            >
          </h5>
          <div class="space-y-2 text-sm pt-1">
            <div class="flex justify-between">
              <span class="text-slate-500">M·ª©c 0.0%</span
              ><span
                id="tech-fib-0"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c th·∫•p nh·∫•t trong ph·∫°m vi xu h∆∞·ªõng ƒëang x√©t</span></span
              >
            </div>
            <div class="flex justify-between text-yellow-500 font-medium">
              <span class="text-slate-500 font-normal">M·ª©c 23.6%</span
              ><span
                id="tech-fib-236"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">Ng∆∞·ª°ng h·ªìi quy Fibonacci 23.6%. M·ª©c ƒëi·ªÅu ch·ªânh n√¥ng</span></span
              >
            </div>
            <div class="flex justify-between text-amber-500 font-medium">
              <span class="text-slate-500 font-normal">M·ª©c 38.2%</span
              ><span
                id="tech-fib-382"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >Ng∆∞·ª°ng h·ªìi quy Fibonacci 38.2%. M·ª©c h·ªó tr·ª£/kh√°ng c·ª± th∆∞·ªùng g·∫∑p</span
                ></span
              >
            </div>
            <div class="flex justify-between text-indigo-500 font-bold">
              <span class="text-slate-500 font-normal">M·ª©c 50.0%</span
              ><span
                id="tech-fib-500"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >M·ª©c 50.0%. Kh√¥ng ph·∫£i t·ªâ l·ªá Fib nh∆∞ng l√† ng∆∞·ª°ng t√¢m l√Ω quan tr·ªçng</span
                ></span
              >
            </div>
            <div class="flex justify-between text-emerald-500 font-medium">
              <span class="text-slate-500 font-normal">M·ª©c 61.8%</span
              ><span
                id="tech-fib-618"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content"
                  >T·ªâ l·ªá V√†ng (Golden Ratio). Ng∆∞·ª°ng quan tr·ªçng ƒë·ªÉ x√°c ƒë·ªãnh xu h∆∞·ªõng c√≤n ti·∫øp di·ªÖn hay kh√¥ng</span
                ></span
              >
            </div>
            <div class="flex justify-between text-teal-500 font-medium">
              <span class="text-slate-500 font-normal">M·ª©c 78.6%</span
              ><span
                id="tech-fib-786"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">Ng∆∞·ª°ng h·ªìi quy Fibonacci 78.6%. M·ª©c ƒëi·ªÅu ch·ªânh s√¢u</span></span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-slate-500">M·ª©c 100.0%</span
              ><span
                id="tech-fib-100"
                class="skeleton-shimmer text-transparent bg-slate-200/50 dark:bg-slate-800/50 rounded-md w-16 h-5 indicator-tooltip"
                ><span class="tooltip-content">M·ª©c cao nh·∫•t trong ph·∫°m vi xu h∆∞·ªõng ƒëang x√©t</span></span
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Right Columns: AI -->
      <div class="lg:col-span-2 space-y-4">
        <!-- AI Core Analysis -->
        <div
          class="p-6 bg-white/40 dark:bg-slate-900/50 backdrop-blur-xl rounded-3xl border border-white/50 dark:border-white/10 shadow-2xl relative overflow-hidden"
        >
          <div class="absolute inset-0 bg-gradient-to-br from-indigo-500/5 to-purple-500/5 pointer-events-none"></div>
          <div class="flex items-center gap-2 mb-4 border-b border-slate-200 dark:border-white/10 pb-3">
            <div
              class="w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-500/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 shadow-sm border border-indigo-100 dark:border-transparent"
            >
              <i data-lucide="brain-circuit" class="w-5 h-5"></i>
            </div>
            <h4 class="font-bold text-slate-800 dark:text-white text-lg">T·ªïng h·ª£p t·ª´ AI</h4>
            <div class="flex-1 text-right flex items-center justify-end gap-2 text-xs flex-wrap">
              <div
                id="tech-recommendation-badge"
                class="inline-flex items-center text-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold transition-all border border-transparent opacity-0"
              ></div>
              <span
                id="tech-gauge-ma"
                class="inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-sm text-[11px] font-semibold text-slate-600 dark:text-slate-300 skeleton-shimmer text-transparent min-w-[70px] h-6 indicator-tooltip"
                ><span class="tooltip-content">ƒêi·ªÉm t·ªïng h·ª£p t·ª´ c√°c ch·ªâ b√°o xu h∆∞·ªõng (MA)</span
                ><i data-lucide="trending-up" class="w-3 h-3"></i><span class="gauge-text">MA: --</span></span
              >
              <span
                id="tech-gauge-osc"
                class="inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-sm text-[11px] font-semibold text-slate-600 dark:text-slate-300 skeleton-shimmer text-transparent min-w-[70px] h-6 indicator-tooltip"
                ><span class="tooltip-content">ƒêi·ªÉm t·ªïng h·ª£p t·ª´ c√°c ch·ªâ b√°o ƒë·ªông l∆∞·ª£ng (RSI, Stochastic...)</span
                ><i data-lucide="activity" class="w-3 h-3"></i><span class="gauge-text">OSC: --</span></span
              >
              <span
                id="tech-gauge-summary"
                class="inline-flex items-center gap-1 px-2.5 py-1 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/40 dark:to-purple-900/40 border border-indigo-200 dark:border-indigo-500/30 rounded-lg shadow-sm text-[11px] font-bold text-indigo-600 dark:text-indigo-400 skeleton-shimmer text-transparent min-w-[80px] h-6 indicator-tooltip"
                ><span class="tooltip-content">Khuy·∫øn ngh·ªã t·ªïng h·ª£p t·ª´ s·ª± k·∫øt h·ª£p c·ªßa t·∫•t c·∫£ c√°c ch·ªâ b√°o</span
                ><i data-lucide="bar-chart-2" class="w-3 h-3"></i><span class="gauge-text">--</span></span
              >
            </div>
          </div>
          <div
            id="tech-analysis-content"
            class="text-[15px] text-slate-600 dark:text-slate-300 leading-relaxed max-h-[480px] overflow-y-auto custom-scrollbar pr-2 markdown-content prose prose-sm dark:prose-invert max-w-none"
          >
            <div class="flex items-center gap-2 text-slate-400 mb-2">
              <i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i>
              <span class="text-sm">ƒêang t·∫£i d·ªØ li·ªáu ph√¢n t√≠ch...</span>
            </div>
          </div>
        </div>

        <!-- Strategy Methods -->
        <div
          class="p-5 bg-white/30 dark:bg-slate-900/40 backdrop-blur-md rounded-3xl border border-slate-200 dark:border-white/10 shadow-lg hover:shadow-xl transition-shadow duration-300"
        >
          <h5
            class="flex items-center gap-2 text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest mb-3"
          >
            <i data-lucide="crosshair" class="w-4 h-4"></i> Chi·∫øn l∆∞·ª£c √°p d·ª•ng
          </h5>
          <div id="tech-methods-list" class="space-y-3">
            <div class="h-24 bg-slate-200/50 dark:bg-slate-800/50 skeleton-shimmer rounded-2xl"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Templates -->
<template id="analysis-chart-skeleton-template">
  <div class="h-full w-full flex flex-col gap-2 p-2 chart-skeleton">
    <div class="flex-1 flex items-end gap-1 chart-skeleton-bars">
      <!-- Bars will be generated by JS -->
    </div>
    <div class="h-2 inset-0 bg-slate-200/50 dark:bg-slate-800/40 skeleton-shimmer rounded-lg w-full"></div>
  </div>
</template>

<template id="analysis-chart-error-template">
  <div class="flex items-center justify-center h-full text-center p-4">
    <p class="text-sm text-slate-500 dark:text-slate-400">Kh√¥ng th·ªÉ t·∫£i bi·ªÉu ƒë·ªì</p>
  </div>
</template>

<template id="analysis-method-item-template">
  <div class="p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl">
    <div class="flex items-center justify-between mb-1">
      <span class="method-name text-sm font-bold text-slate-700 dark:text-slate-200"></span>
      <span class="method-signal-badge inline-flex items-center gap-1 text-xs font-bold px-2 py-0.5 rounded-full">
        <i class="method-icon w-3 h-3"></i>
        <span class="method-signal-text"></span>
      </span>
    </div>
    <p class="method-category text-xs text-slate-500 dark:text-slate-400 mb-1"></p>
    <p class="method-evaluation text-xs text-slate-600 dark:text-slate-300"></p>
  </div>
</template>
