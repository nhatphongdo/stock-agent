<!-- Technical Chart Tab (Visible by default) -->
<div
  id="tab-content-chart"
  class="h-full w-full flex flex-col tab-content-item px-4 pt-4 pb-4 lg:px-8 lg:pb-8 overflow-hidden z-10"
>
  <div
    id="chart-tab-content-empty"
    class="flex-1 bg-white/20 dark:bg-slate-900/20 rounded-3xl border border-slate-400 dark:border-white/20 backdrop-blur-sm flex flex-col items-center justify-center p-8 text-center border-dashed"
  >
    <div
      class="w-20 h-20 bg-gradient-to-br from-primary-500/20 to-blue-500/20 dark:from-primary-500/10 dark:to-blue-500/10 rounded-3xl flex items-center justify-center mb-6 text-primary-500"
    >
      <i data-lucide="candlestick-chart" class="w-10 h-10"></i>
    </div>
    <h4 class="text-lg font-bold text-slate-700 dark:text-slate-300 mb-3">Bi·ªÉu ƒë·ªì k·ªπ thu·∫≠t</h4>
    <p class="text-sm text-slate-500 dark:text-slate-400 max-w-xs leading-relaxed">
      Xem bi·ªÉu ƒë·ªì gi√° v√† ph√¢n t√≠ch k·ªπ thu·∫≠t c·ªßa c·ªï phi·∫øu. H·ªó tr·ª£ m·ªü chart tr·ª±c ti·∫øp tr√™n TradingView ho·∫∑c Investing.com.
    </p>
    <div class="mt-6 px-4 py-2 bg-primary-50 dark:bg-primary-900/20 rounded-xl">
      <p class="text-xs text-primary-600 dark:text-primary-400 font-medium">
        üí° Click v√†o m√£ c·ªï phi·∫øu trong cu·ªôc tr√≤ chuy·ªán ƒë·ªÉ xem bi·ªÉu ƒë·ªì
      </p>
    </div>
  </div>
  <div id="chart-tab-content-container" class="animate-fade-in-up p-1 hidden h-full">
    <div id="chart-wrapper" class="w-full h-full flex flex-col gap-3 overflow-hidden">
      <!-- Chart Controls -->
      <div
        id="chart-control-container"
        class="flex flex-wrap items-center gap-2 p-3 bg-white/30 dark:bg-slate-900/30 rounded-2xl border border-slate-200 dark:border-white/10 backdrop-blur-sm relative z-20"
      >
        <!-- Timeframe Selector -->
        <div class="flex items-center gap-1">
          <span class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase">Kho·∫£ng:</span>
          <select
            id="chart-timeframe"
            class="text-xs font-bold bg-white/60 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded-lg px-2 py-1 outline-none focus:ring-2 focus:ring-primary-500/30"
          >
            <option value="1D">1 Ng√†y</option>
            <option value="1W">1 Tu·∫ßn</option>
            <option value="1M">1 Th√°ng</option>
            <option value="3M">3 Th√°ng</option>
            <option value="6M" selected>6 Th√°ng</option>
            <option value="9M">9 Th√°ng</option>
            <option value="1Y">1 NƒÉm</option>
            <option value="2Y">2 NƒÉm</option>
            <option value="5Y">5 NƒÉm</option>
            <option value="10Y">10 NƒÉm</option>
          </select>
        </div>
        <!-- Interval Selector -->
        <div class="flex items-center gap-1">
          <span class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase">Chu k·ª≥:</span>
          <select
            id="chart-interval"
            class="text-xs font-bold bg-white/60 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded-lg px-2 py-1 outline-none focus:ring-2 focus:ring-primary-500/30"
          >
            <option value="5m">5 ph√∫t</option>
            <option value="15m">15 ph√∫t</option>
            <option value="30m">30 ph√∫t</option>
            <option value="1H">1 gi·ªù</option>
            <option value="1D" selected>1 ng√†y</option>
            <option value="1W">1 tu·∫ßn</option>
            <option value="1M">1 th√°ng</option>
          </select>
        </div>
        <!-- Indicator Toggles with Mobile Dropdown -->
        <div class="relative ml-auto">
          <!-- Mobile Trigger Button -->
          <button
            onclick="document.getElementById('mobile-indicators').classList.toggle('hidden')"
            class="lg:hidden flex items-center gap-1 text-xs font-bold px-2 py-1 bg-white/60 dark:bg-slate-800/60 rounded-lg border border-slate-200 dark:border-slate-700"
          >
            <span>Ch·ªâ b√°o</span>
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>

          <!-- Indicators List -->
          <div
            id="mobile-indicators"
            class="hidden lg:flex lg:items-center lg:gap-3 absolute lg:static top-full right-0 mt-2 lg:mt-0 p-3 lg:p-0 bg-white/90 dark:bg-slate-900/90 lg:bg-transparent backdrop-blur-xl lg:backdrop-blur-none border border-white/20 lg:border-0 rounded-xl lg:rounded-none shadow-xl lg:shadow-none flex-col lg:flex-row gap-3 min-w-[120px] z-50"
          >
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-ma"
                class="w-4 h-4 rounded border-slate-300 accent-blue-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-blue-500">MA20</span>
            </label>
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-ema"
                class="w-4 h-4 rounded border-slate-300 accent-orange-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-orange-500">EMA9</span>
            </label>
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-bb"
                class="w-4 h-4 rounded border-slate-300 accent-purple-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-purple-500">BB</span>
            </label>
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-rsi"
                class="w-4 h-4 rounded border-slate-300 accent-amber-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-amber-500">RSI</span>
            </label>
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-macd"
                class="w-4 h-4 rounded border-slate-300 accent-blue-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-blue-500">MACD</span>
            </label>
            <label class="flex items-center gap-1.5 cursor-pointer group whitespace-nowrap">
              <input
                type="checkbox"
                id="indicator-vol-sma"
                class="w-4 h-4 rounded border-slate-300 accent-violet-500 transition-transform group-hover:scale-110"
              />
              <span class="text-xs font-bold text-violet-500">Vol SMA</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Combined Chart with Panes (Price + Volume) -->
      <div
        id="chart-container-wrapper"
        class="flex-1 bg-white/40 dark:bg-slate-900/40 rounded-2xl border border-slate-200 dark:border-white/10 backdrop-blur-sm p-3 min-h-0"
      >
        <div id="chart-container" style="width: 100%; height: 100%"></div>
      </div>
    </div>
  </div>
</div>

<!-- Chart Error Template -->
<template id="chart-error-template">
  <div class="flex flex-col items-center justify-center h-full text-center p-6">
    <i data-lucide="alert-circle" class="w-12 h-12 text-amber-500 mb-4"></i>
    <p class="text-slate-600 dark:text-slate-400 mb-4">
      Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu bi·ªÉu ƒë·ªì cho <strong class="chart-error-symbol"></strong>
    </p>
    <p class="text-sm text-slate-500 dark:text-slate-500 mb-6">
      Vui l√≤ng s·ª≠ d·ª•ng c√°c n·ªÅn t·∫£ng b√™n d∆∞·ªõi ƒë·ªÉ xem bi·ªÉu ƒë·ªì:
    </p>
    <div class="flex gap-3">
      <a
        href="#"
        class="chart-error-tradingview flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-[#2962FF]/60 to-[#1E88E5]/60 dark:from-[#2962FF]/90 dark:to-[#1E88E5]/90 hover:from-[#2962FF] hover:to-[#1E88E5] backdrop-blur-xl backdrop-saturate-150 text-white text-xs font-bold rounded-xl transition-all shadow-lg shadow-blue-500/20 dark:shadow-blue-500/30 border border-white/30 dark:border-white/10 ring-1 ring-inset ring-white/10 hover:shadow-xl hover:scale-105"
        target="_blank"
        rel="noreferrer noopener"
      >
        <svg class="w-4 h-4" viewBox="0 0 36 28" fill="currentColor">
          <path d="M14 22H7V6h7v16zm8-16h-7v16h7V6zm8 16h-7V6h7v16z" />
        </svg>
        TradingView
      </a>
      <a
        href="#"
        class="chart-error-investing flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-[#EF6C35]/60 to-[#FF8A50]/60 dark:from-[#EF6C35]/90 dark:to-[#FF8A50]/90 hover:from-[#EF6C35] hover:to-[#FF8A50] backdrop-blur-xl backdrop-saturate-150 text-white text-xs font-bold rounded-xl transition-all shadow-lg shadow-orange-500/20 dark:shadow-orange-500/30 border border-white/30 dark:border-white/10 ring-1 ring-inset ring-white/10 hover:shadow-xl hover:scale-105"
        target="_blank"
        rel="noreferrer noopener"
      >
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
          <path d="M3 3v18h18V3H3zm16 16H5V5h14v14zM7 7v10h2V7H7zm4 4v6h2v-6h-2zm4-2v8h2V9h-2z" />
        </svg>
        Investing
      </a>
    </div>
  </div>
</template>

<!-- Chart Skeleton Template -->
<template id="chart-skeleton-template">
  <div class="h-full w-full flex flex-col gap-2 p-2 chart-skeleton">
    <div class="flex-1 flex items-end gap-1 chart-skeleton-bars"></div>
    <div class="h-2 inset-0 bg-slate-200/50 dark:bg-slate-800/40 skeleton-shimmer rounded-lg w-full"></div>
  </div>
</template>
